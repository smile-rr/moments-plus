---
import BaseLayout from './BaseLayout.astro';
import type { Locale } from '../i18n';

interface Props {
  title: string;
  description: string;
  lang: Locale;
  currentPath: string;
  lastUpdated?: Date;
}

const { title, description, lang, currentPath, lastUpdated } = Astro.props;

// 格式化日期
const formatDate = (date: Date, locale: Locale) => {
  const options: Intl.DateTimeFormatOptions = { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric' 
  };
  
  const localeMap = {
    en: 'en-US',
    zh: 'zh-CN',
    ja: 'ja-JP',
  };
  
  return date.toLocaleDateString(localeMap[locale], options);
};

const lastUpdatedText = {
  en: 'Last Updated',
  zh: '最后更新',
  ja: '最終更新',
};
---

<BaseLayout 
  title={title} 
  description={description} 
  lang={lang}
  currentPath={currentPath}
>
  <div class="content legal-content">
    <h1>{title}</h1>
    {lastUpdated && (
      <p class="updated">
        {lastUpdatedText[lang]}: {formatDate(lastUpdated, lang)}
      </p>
    )}
    <slot />
  </div>
</BaseLayout>

<style>
  .legal-content {
    max-width: 800px;
  }

  .legal-content h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }

  .legal-content .updated {
    color: #999;
    font-size: 0.875rem;
    margin-bottom: 2rem;
  }

  .legal-content h2 {
    font-size: 1.25rem;
    margin: 2rem 0 1rem;
    padding-top: 1rem;
    border-top: 1px solid #eee;
  }

  .legal-content h2:first-of-type {
    border-top: none;
    padding-top: 0;
  }

  .legal-content h3 {
    font-size: 1.1rem;
    margin: 1.5rem 0 0.5rem;
    color: #444;
  }

  .legal-content ul {
    margin-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .legal-content li {
    margin-bottom: 0.5rem;
    color: #555;
  }

  .legal-content p {
    margin-bottom: 1rem;
    color: #555;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .legal-content h1 {
      font-size: 1.75rem;
    }

    .legal-content h2 {
      font-size: 1.15rem;
    }
  }
</style>
