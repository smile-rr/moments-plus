---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Features from '../components/Features.astro';
import Screenshots from '../components/Screenshots.astro';
import { DEFAULT_LOCALE, type Locale } from '../i18n';
import { getHomeContent } from '../utils/content';

const lang: Locale = DEFAULT_LOCALE;
const homeContent = await getHomeContent(lang);

if (!homeContent) {
  return Astro.redirect('/404');
}

const { data } = homeContent;
const currentPath = '/';
---

<BaseLayout 
  title={data.title} 
  description={data.description} 
  lang={lang}
  currentPath={currentPath}
>
  <Hero
    title={data.hero.title}
    subtitle={data.hero.subtitle}
    description={data.description}
    ctaText={data.hero.ctaText}
    ctaLink={data.hero.ctaLink}
    appIcon="/images/icon/AppIconImage.png"
  />
  
  <Screenshots screenshots={data.screenshots} />
  
  <Features 
    features={data.features}
    title={data.featuresSection?.title}
    subtitle={data.featuresSection?.subtitle}
  />
</BaseLayout>

