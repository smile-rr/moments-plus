---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import Features from '../../components/Features.astro';
import Screenshots from '../../components/Screenshots.astro';
import BlogPreview from '../../components/BlogPreview.astro';
import Privacy from '../../components/Privacy.astro';
import OfferBanner from '../../components/OfferBanner.astro';
import { SUPPORTED_LOCALES, type Locale } from '../../i18n';
import { getHomeContent } from '../../utils/content';

export async function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params as { lang: Locale };
const homeContent = await getHomeContent(lang);

if (!homeContent) {
  return Astro.redirect('/en');
}

const { data } = homeContent;
const currentPath = `/${lang}`;
---

<BaseLayout 
  title={data.title} 
  description={data.description} 
  lang={lang}
  currentPath={currentPath}
>
  <OfferBanner specialOffer={data.specialOffer} />
  <Hero
    title={data.hero.title}
    subtitle={data.hero.subtitle}
    description={data.description}
    ctaText={data.hero.ctaText}
    ctaLink={data.hero.ctaLink}
    appIcon="/images/icon/AppIconImage.png"
    lang={lang}
  />
  
  <Screenshots screenshots={data.screenshots} />
  
  <Features 
    features={data.features}
  />
  
  <BlogPreview lang={lang} />
</BaseLayout>
