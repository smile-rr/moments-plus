---
import BlogPostView from '../../../components/views/BlogPostView.astro';
import { SUPPORTED_LOCALES, type Locale } from '../../../i18n';
import { getBlogPosts } from '../../../utils/blog';

export async function getStaticPaths() {
  const paths = [];
  
  for (const lang of SUPPORTED_LOCALES.filter(l => l !== 'en')) {
    const posts = await getBlogPosts(lang);
    for (const post of posts) {
      paths.push({
        params: { 
          lang,
          slug: post.id.split('/')[1].replace(/\.md$/, '')
        },
        props: { post },
      });
    }
  }
  
  return paths;
}

const { post } = Astro.props;
const { lang } = Astro.params as { lang: Locale };
---

<BlogPostView post={post} lang={lang} />
