---
import SupportView from '../../components/views/SupportView.astro';
import { SUPPORTED_LOCALES, type Locale } from '../../i18n';
import { getSupportContent } from '../../utils/content';

export async function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params as { lang: Locale };
const supportContent = await getSupportContent(lang);

if (!supportContent) {
  return Astro.redirect('/support');
}

const { data } = supportContent;
const currentPath = `/${lang}/support`;
---

<SupportView supportData={data} lang={lang} currentPath={currentPath} />
