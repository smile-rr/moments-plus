---
import type { Locale } from '../i18n';
import { getLocalizedPath } from '../i18n';

interface Props {
  currentLang: Locale;
  currentPath: string;
}

const { currentLang, currentPath } = Astro.props;

// 从当前路径中移除语言前缀
let pathWithoutLang = currentPath;
if (currentPath.startsWith('/zh')) {
  pathWithoutLang = currentPath.replace('/zh', '') || '/';
}

// 获取另一个语言
const otherLang = currentLang === 'en' ? 'zh' : 'en';
const otherLabel = currentLang === 'en' ? '中文' : 'EN';
---

<a 
  href={getLocalizedPath(otherLang, pathWithoutLang)}
  class="text-sm hover:opacity-70 transition-opacity"
  style="color: #86868b;"
  hreflang={otherLang}
  aria-label={`Switch to ${otherLabel}`}
>
  {otherLabel}
</a>
