---
import { type CollectionEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { type Locale } from '../../i18n';

interface Props {
  supportData: CollectionEntry<'support'>['data'];
  lang: Locale;
  currentPath: string;
}

const { supportData, lang, currentPath } = Astro.props;

// Localized strings for UI elements
const contactTitle = {
  zh: '联系我们',
  ja: 'お問い合わせ',
  en: 'Contact Us'
};

const contactDesc = {
  zh: '有问题？我们随时为您提供帮助。',
  ja: 'ご質問がありますか？お気軽にお問い合わせください。',
  en: 'Have questions? We\'re here to help.'
};

const faqTitle = {
  zh: '常见问题',
  ja: 'よくある質問',
  en: 'Frequently Asked Questions'
};
---

<BaseLayout 
  title={supportData.title} 
  description={supportData.description} 
  lang={lang}
  currentPath={currentPath}
>
  <div class="max-w-4xl mx-auto px-4 md:px-8 py-12 md:py-16">
    <!-- Hero Section -->
    <div class="text-center mb-12 md:mb-16">
      <h1 class="text-4xl md:text-5xl font-bold mb-4" style="color: var(--color-text);">
        {supportData.title}
      </h1>
      <p class="text-lg md:text-xl max-w-2xl mx-auto" style="color: var(--color-text-secondary);">
        {supportData.description}
      </p>
    </div>

    <!-- Contact Card -->
    <div 
      class="rounded-2xl p-6 md:p-8 mb-12 border"
      style="background: linear-gradient(to bottom right, rgba(var(--color-primary-rgb), 0.05), rgba(var(--color-primary-rgb), 0.1)); border-color: rgba(var(--color-primary-rgb), 0.2);"
    >
      <div class="flex flex-col md:flex-row items-center gap-4 md:gap-6">
        <div 
          class="w-16 h-16 rounded-2xl flex items-center justify-center shrink-0"
          style="background: rgba(var(--color-primary-rgb), 0.1);"
        >
          <svg class="w-8 h-8" style="color: var(--color-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
        </div>
        <div class="text-center md:text-left">
          <h2 class="text-2xl font-semibold mb-1" style="color: var(--color-text);">
            {contactTitle[lang]}
          </h2>
          <p class="mb-2" style="color: var(--color-text-secondary);">
            {contactDesc[lang]}
          </p>
          <a 
            href={`mailto:${supportData.email}`}
            class="inline-flex items-center gap-2 font-medium transition-colors hover:opacity-80"
            style="color: var(--color-primary);"
          >
            {supportData.email}
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
    
    <!-- FAQ Section -->
    {supportData.faq && supportData.faq.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-8 text-center" style="color: var(--color-text);">
          {faqTitle[lang]}
        </h2>
        <div class="space-y-4">
          {supportData.faq.map((item) => (
            <details class="group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden">
              <summary class="flex items-center justify-between p-5 md:p-6 cursor-pointer list-none">
                <h3 class="text-lg font-medium pr-4" style="color: var(--color-text);">
                  {item.question}
                </h3>
                <svg class="w-5 h-5 shrink-0 transition-transform group-open:rotate-180" style="color: var(--color-text-muted);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
              </summary>
              <div class="px-5 md:px-6 pb-5 md:pb-6 pt-0">
                <p class="leading-relaxed" style="color: var(--color-text-secondary);">
                  {item.answer}
                </p>
              </div>
            </details>
          ))}
        </div>
      </div>
    )}
  </div>
</BaseLayout>
